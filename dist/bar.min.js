'use-strict';function BarChart(a,b,c,d){var e=this;e.configureChart(a,b,c,d),e.performPreOperations(),e.drawChart()}BarChart.prototype.configureChart=function(a,b,c,d){var e=this;e.setCanvasParameters(a,b,c,d),e.setChartParameters()},BarChart.prototype.setCanvasParameters=function(a,b,c,d){var e=this;e.id=a,e.width=b,e.height=c,e.data=d},BarChart.prototype.setChartParameters=function(){var a=this;a.axisRatio=10,a.verticalMargin=a.height*a.axisRatio/100,a.horizontalMargin=a.width*a.axisRatio/100,a.axisColor="#b1b1b1",a.axisWidth=.75,a.fontRatio=3,a.fontFamily="times",a.fontStyle="normal",a.fontWeight="300",a.fontColor="#666",a.verticalFontSize=a.height*a.fontRatio/100,a.horizontalFontSize=a.width*a.fontRatio/100,a.guidelineColor="#e5e5e5",a.guidelineWidth=.5},BarChart.prototype.performPreOperations=function(){var a=this;a.createCanvas(),a.handleData(),a.prepareData()},BarChart.prototype.createCanvas=function(){var a=this,b=document.createElement("canvas");b.id=a.id+"-"+Math.random(),b.width=a.width,b.height=a.height,document.getElementById(a.id).innerHtml="",document.getElementById(a.id).appendChild(b),a.canvas=b,a.context=b.getContext("2d")},BarChart.prototype.handleData=function(){var a=this;a.labels=[],a.values=[],a.data.forEach(function(b){a.labels.push(b.label),a.values.push(b.value)})},BarChart.prototype.prepareData=function(){var a=this;a.itemsNum=a.data.length,a.maxValue=Math.max.apply(null,a.values),a.minValue=Math.min.apply(null,a.values),a.verticalAxisWidth=a.height-2*a.verticalMargin,a.horizontalAxisWidth=a.width-2*a.horizontalMargin,a.verticalUpperBound=10*Math.ceil(a.maxValue/10),a.verticalLabelFrequency=a.verticalUpperBound/a.itemsNum,a.horizontalLabelFrequency=a.horizontalAxisWidth/a.itemsNum},BarChart.prototype.drawChart=function(){var a=this;a.drawVerticalAxis(),a.drawVerticalLabels(),a.drawHoriztonalAxis(),a.drawHorizontalLabels(),a.drawHorizontalGuidelines(),a.drawVerticalGuidelines(),a.drawBars()},BarChart.prototype.drawVerticalAxis=function(){var a=this;a.context.beginPath(),a.context.strokeStyle=a.axisColor,a.context.lineWidth=a.axisWidth,a.context.moveTo(a.horizontalMargin,a.verticalMargin),a.context.lineTo(a.horizontalMargin,a.height-a.verticalMargin),a.context.stroke()},BarChart.prototype.drawVerticalLabels=function(){var a=this,b=a.fontStyle=a.fontStyle+" "+a.fontWeight+" "+a.verticalFontSize+"px "+a.fontFamily;a.context.font=b,a.context.textAlign="right",a.context.fillStyle=a.fontColor;var c=a.verticalAxisWidth/a.verticalUpperBound*a.verticalLabelFrequency;for(let b=0;b<=a.itemsNum;b++){var d=a.verticalUpperBound-b*a.verticalLabelFrequency,e=a.horizontalMargin-a.horizontalMargin/a.axisRatio,f=a.verticalMargin+b*c;a.context.fillText(d,e,f)}},BarChart.prototype.drawHoriztonalAxis=function(){var a=this;a.context.beginPath(),a.context.strokeStyle=a.axisColor,a.context.lineWidth=a.axisWidth,a.context.moveTo(a.horizontalMargin,a.height-a.verticalMargin),a.context.lineTo(a.width-a.horizontalMargin,a.height-a.verticalMargin),a.context.stroke()},BarChart.prototype.drawHorizontalLabels=function(){var a=this,b=a.fontStyle=a.fontStyle+" "+a.fontWeight+" "+a.verticalFontSize+"px "+a.fontFamily;a.context.font=b,a.context.textAlign="center",a.context.textBaseline="top",a.context.fillStyle=a.fontColor;for(let b=0;b<a.itemsNum;b++){var c=a.horizontalMargin+b*a.horizontalLabelFrequency+a.horizontalLabelFrequency/2,d=a.height-a.verticalMargin+a.verticalMargin/a.axisRatio;a.context.fillText(a.labels[b],c,d)}},BarChart.prototype.drawHorizontalGuidelines=function(){var a=this;a.context.strokeStyle=a.guidelineColor,a.context.lineWidth=a.guidelineWidth;var b=a.verticalAxisWidth/a.verticalUpperBound*a.verticalLabelFrequency;for(let g=0;g<=a.itemsNum;g++){var c=a.horizontalMargin,d=a.verticalMargin+g*b,e=a.horizontalMargin+a.horizontalAxisWidth,f=a.verticalMargin+g*b;a.context.beginPath(),a.context.moveTo(c,d),a.context.lineTo(e,f),a.context.stroke()}},BarChart.prototype.drawVerticalGuidelines=function(){var a=this;a.context.strokeStyle=a.guidelineColor,a.context.lineWidth=a.guidelineWidth;for(let f=0;f<=a.itemsNum;f++){var b=a.horizontalMargin+f*a.horizontalLabelFrequency,c=a.height-a.verticalMargin,d=a.horizontalMargin+f*a.horizontalLabelFrequency,e=a.verticalMargin;a.context.beginPath(),a.context.moveTo(b,c),a.context.lineTo(d,e),a.context.stroke()}},BarChart.prototype.drawBars=function(){var a=this;for(let j=0;j<a.itemsNum;j++){var b=a.createRandomRGBColor(),c="rgba("+b.r+", "+b.g+", "+b.b+", "+"0.3"+")",d="rgba("+b.r+", "+b.g+", "+b.b+")";a.context.beginPath();var e=a.horizontalMargin+j*a.horizontalLabelFrequency+a.horizontalLabelFrequency/a.axisRatio,f=a.height-a.verticalMargin,g=a.horizontalLabelFrequency-2*a.horizontalLabelFrequency/a.axisRatio,h=-1*a.verticalAxisWidth*a.values[j]/a.maxValue;a.context.fillStyle=c,a.context.strokeStyle=d,a.context.rect(e,f,g,h),a.context.stroke(),a.context.fill()}},BarChart.prototype.createRandomRGBColor=function(){var a=getRandomInt(0,257),b=getRandomInt(0,257),c=getRandomInt(0,257);return{r:a,g:b,b:c}};function getRandomInt(a,b){return a=Math.ceil(a),b=Math.floor(b),Math.floor(Math.random()*(b-a))+a}